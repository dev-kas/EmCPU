#!/bin/sh
':' // ───────────────────────────────────────────────
':' // Cross-platform build script: Unix + Windows
':' //
':' // Legend:
':' //   Lines starting with ':'' → Windows label, Unix multi-line comment block
':' //   Lines with @echo/REM     → Windows batch commands
':' //   Plain lines              → Shared commands (must work in both)
':' //
':' // This script builds `bootsector.asm` using `nasm`
':' // and exits with appropriate error handling.
':' // ───────────────────────────────────────────────

@echo off
REM === Windows-specific: check if nasm is installed
where nasm >nul 2>nul || (
    echo [ERROR] nasm not found on PATH (Windows)
    exit /b 1
)

REM === Shared build step
nasm -f bin bootsector.asm -o bootsector.bin || (
    echo [ERROR] NASM failed to assemble bootsector.asm (Windows)
    exit /b 1
)

exit /b 0

:'
# === Unix-specific: check if nasm is installed
if ! command -v nasm >/dev/null 2>&1; then
    echo "[ERROR] nasm not found on PATH (Unix)"
    exit 1
fi

# === Shared build step
if ! nasm -f bin bootsector.asm -o bootsector.bin; then
    echo "[ERROR] NASM failed to assemble bootsector.asm (Unix)"
    exit 1
fi

exit 0
'
